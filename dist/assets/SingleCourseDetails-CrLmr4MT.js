import{r,H as U,u as Y,K as $,j as e,M as u,G as d,L as w,N as G,b as i,f as s}from"./index-Dg2GFtxE.js";import{a as L,b as V,c as z}from"./UpskillsCategoryApi-DXKJxGpo.js";import{A as y}from"./Alert-B7YS0Kez.js";import{P as H}from"./Pagination-DShJ7yuw.js";import"./LastPage-DdfZQxWB.js";const Z=()=>{const[a,C]=r.useState({}),[B,v]=r.useState([]),[x,N]=r.useState({}),[I,h]=r.useState(null),[S,k]=r.useState(null),[M,f]=r.useState(null),A=U(),{courseId:l}=A.state||{},[m,R]=r.useState(1),p=5,[o,P]=r.useState(null),b={"Content-type":"application/json",Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("user")).accessToken},D=Y();$(D.breakpoints.down("sm"));const T=(t,n)=>{R(n)},F=async()=>{var t;try{const n=await L(b,l);n.data?(C(n.data),f(null)):(C({}),f("Course data not found."));const c=await V(b,l);if(c.data.length>0){v(c.data),h(null),P((t=c.data[0])==null?void 0:t.moduleId);const g={};for(const j of c.data){const E=await z(b,j.moduleId);E.data.length>0?g[j.moduleId]=E.data:(g[j.moduleId]=[],k("No topics found for this module."))}N(g)}else v([]),h("No modules found for this course.")}catch(n){console.error("Error fetching data:",n),f("Failed to fetch course data."),h("Failed to fetch modules."),k("Failed to fetch topics.")}},W=t=>{P(t),R(1)};return r.useEffect(()=>{l&&F()},[l]),e.jsxs(e.Fragment,{children:[M?e.jsx(u,{sx:{mt:2},children:e.jsx(y,{severity:"error",children:M})}):e.jsx(u,{sx:{mt:2,backgroundColor:"transparent"},children:e.jsx(d,{container:!0,spacing:2,sx:{display:"flex",alignItems:"center"},children:e.jsx(d,{item:!0,xs:12,children:e.jsx(w,{sx:{p:2,boxShadow:4,transition:"transform 0.3s ease","&:hover":{transform:"scale(1.05)",boxShadow:6},borderRadius:"16px"},children:e.jsxs(G,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},padding:0},children:[e.jsx(i,{sx:{width:{xs:"100%",md:"50%"},mb:{xs:2,md:0},p:2,display:"flex",justifyContent:"center",alignItems:"center"},children:e.jsx("iframe",{title:"YouTube Video",src:`https://www.youtube.com/embed/${a.videoUrl}`,frameBorder:"0",allowFullScreen:!0,style:{width:"100%",height:"100%",borderRadius:"12px",aspectRatio:"16/9",objectFit:"cover"}})}),e.jsxs(i,{sx:{width:{xs:"100%",md:"50%"},pl:{md:2}},children:[e.jsx(s,{variant:"h4",sx:{fontWeight:"bold",color:"#333"},gutterBottom:!0,children:a.courseName}),e.jsxs(s,{variant:"h5",sx:{mt:2,fontWeight:"medium",color:"#555"},children:["Description: ",a.description]}),e.jsxs(i,{sx:{mt:2},children:[e.jsxs(s,{variant:"h6",sx:{fontWeight:"bold",color:"#f39c12"},children:["Discounted Price: ₹",a.sellingPrice]}),e.jsxs(s,{variant:"body1",sx:{color:"text.secondary",textDecoration:"line-through"},children:["Actual Price: ₹",a.courseMrp]}),e.jsxs(s,{variant:"body2",sx:{color:"green",fontWeight:"bold"},children:["You Save: ₹",a.courseMrp-a.sellingPrice," (",a.discount,"% off)"]})]})]})]})})})})}),e.jsx(u,{sx:{mt:2,backgroundColor:"transparent"},children:I?e.jsx(y,{severity:"error",children:I}):e.jsx(i,{sx:{display:"flex",overflowX:"auto",whiteSpace:"nowrap",gap:2,pb:1,"&::-webkit-scrollbar":{height:"6px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#aaa",borderRadius:"10px"},"&::-webkit-scrollbar-track":{backgroundColor:"#f5f5f5"}},children:B.map(t=>e.jsx(w,{onClick:()=>W(t.moduleId),sx:{cursor:"pointer",boxShadow:o===t.moduleId?6:2,borderRadius:"50px",backgroundColor:o===t.moduleId?"#00afb5":"white",color:o===t.moduleId?"white":"black",border:o===t.moduleId?"3px solid #00afb5":"1px solid #ddd","&:hover":{boxShadow:8,transform:"scale(1.05)",backgroundColor:o===t.moduleId?"#009fa1":"#f5f5f5"},textAlign:"center",transition:"all 0.3s ease-in-out",padding:"10px 20px",display:"flex",alignItems:"center",justifyContent:"center",height:"45px",whiteSpace:"nowrap",minWidth:"150px",flexShrink:0},children:e.jsx(s,{variant:"body2",sx:{fontWeight:"bold",textAlign:"center",transition:"color 0.3s ease",color:o===t.moduleId?"white":"black"},children:t.moduleName})},t.moduleId))})}),e.jsx(u,{sx:{mt:2,backgroundColor:"transparent"},children:S?e.jsx(y,{severity:"error",children:S}):o&&x[o]?e.jsxs(d,{container:!0,spacing:2,children:[" ",x[o].slice((m-1)*p,m*p).map(t=>e.jsx(d,{item:!0,xs:12,children:e.jsxs(w,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:"center",p:1.5,boxShadow:2,borderRadius:"12px",background:"#ffffff",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{boxShadow:5,transform:"scale(1.02)"}},children:[e.jsx(i,{sx:{width:{xs:"100%",sm:"25%"},borderRadius:"10px",overflow:"hidden",display:"flex",justifyContent:"center"},children:t.videoUrl&&e.jsx("iframe",{title:`YouTube Video for ${t.topicName}`,src:`https://www.youtube.com/embed/${t.videoUrl}`,frameBorder:"0",allow:"autoplay; encrypted-media",allowFullScreen:!0,style:{width:"60%",height:"120px",borderRadius:"10px"}})}),e.jsxs(i,{sx:{flex:1,pl:{sm:2},textAlign:"left"},children:[e.jsx(s,{variant:"h3",sx:{fontWeight:"bold",color:"#000"},children:t.topicName}),e.jsx(s,{variant:"body2",sx:{color:"#555"},children:t.description})]})]})},t.topicId)),e.jsx(d,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center",mt:1.5},children:e.jsx(H,{count:Math.ceil(x[o].length/p),page:m,onChange:T,color:"primary",variant:"outlined",shape:"rounded"})})]}):e.jsx(s,{variant:"body2",sx:{color:"#777",mt:2},children:"No topics found for the selected module."})})]})};export{Z as default};
