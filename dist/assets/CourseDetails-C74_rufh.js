import{r as i,H as z,J as D,u as I,K as B,j as e,M as R,f as a,G as s,L as T,N as E,b as c,c as g,a as M,B as N}from"./index-Dg2GFtxE.js";import{f as W}from"./UpskillsCategoryApi-DXKJxGpo.js";const U=()=>{const[h,f]=i.useState([]),[y,G]=i.useState(!1);i.useState(null);const b=z(),{categoryId:d,categoryName:j}=b.state||{},n=JSON.parse(sessionStorage.getItem("user")),p={"Content-type":"application/json",Authorization:"Bearer "+n.accessToken},x=D(),w=I(),l=B(w.breakpoints.down("sm")),C=async()=>{try{const o=await W(p,d);console.log(o.data);const r=o.data;r&&f(r)}catch(o){console.error("Error fetching courses:",o)}};i.useEffect(()=>{d&&C()},[d]);const v=o=>{x("course-details",{state:{courseId:o}})},S=async(o,r)=>{try{const u=o*100,m=await M.get(`${N}/rayzorpay/v1/rayzorPayPayment/{amount}?amount=${u}`,{headers:p});console.log(m.data);const t=m.data;if(t&&t.orderTd){const P={key:"rzp_test_c09ktph3IirGmG",amount:t.amount*100,currency:t.currency,name:"Course Subscription",description:"Payment for course subscription",image:"https://yourdomain.com/your-logo.png",order_id:t.orderTd,handler:function(k){alert("Payment successful!"),console.log(k),x(`/course-details/${r}`)},prefill:{name:n.name,email:n.email,contact:n.contact},notes:{address:"Razorpay Corporate Office"},theme:{color:"#F37254"}};new window.Razorpay(P).open()}else alert("Error: Could not fetch payment data.")}catch(u){console.error("Error initiating payment:",u),alert("Payment initiation failed!")}};return e.jsxs(e.Fragment,{children:[e.jsx(R,{children:e.jsxs(a,{variant:"h3",gutterBottom:!0,children:["Courses Details for ",j]})}),e.jsx(s,{container:!0,spacing:2,children:(y?h:h.slice(0,4)).map(o=>e.jsx(s,{item:!0,xs:12,children:e.jsx(T,{sx:{border:"1px solid #ccc",borderRadius:"8px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.1)",transition:"transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out","&:hover":{transform:"scale(1.03)",boxShadow:"0 8px 16px rgba(0, 0, 0, 0.2)",cursor:"pointer"},margin:1,height:"auto",padding:"8px"},children:e.jsx(E,{children:e.jsxs(s,{container:!0,spacing:2,children:[e.jsx(s,{item:!0,xs:12,sm:6,md:6,lg:6,children:o.videoUrl&&e.jsx(c,{sx:{position:"relative",paddingTop:"40%",borderRadius:"8px",overflow:"hidden"},children:e.jsx("iframe",{title:"YouTube Video",src:`https://www.youtube.com/embed/${o.videoUrl}`,frameBorder:"0",allowFullScreen:!0,style:{position:"absolute",top:0,left:0,width:"80%",height:"100%",border:"none",borderRadius:"8px"}})})}),e.jsx(s,{item:!0,xs:12,sm:6,md:6,lg:6,children:e.jsxs(c,{sx:{display:"flex",flexDirection:"column",height:"100%"},children:[e.jsx(a,{variant:l?"h5":"h4",sx:{mb:1,fontWeight:"bold"},children:o.courseName}),e.jsx(a,{variant:"body2",sx:{mb:2,color:"text.secondary"},children:o.description}),e.jsxs(c,{sx:{display:"flex",alignItems:"center",mb:2},children:[e.jsxs(a,{variant:l?"body1":"h5",sx:{color:"primary.main",fontWeight:"bold",mr:2},children:["₹",o.sellingPrice]}),e.jsxs(a,{variant:"body1",sx:{color:"text.secondary",textDecoration:"line-through",mr:2},children:["₹",o.courseMrp]}),e.jsxs(c,{sx:{backgroundColor:"success.light",color:"success.dark",borderRadius:"4px",padding:"4px 8px",fontWeight:"bold",fontSize:l?"0.875rem":"1rem"},children:[o.discount,"% off"]})]}),e.jsxs(s,{container:!0,spacing:2,sx:{mt:2},children:[e.jsx(s,{item:!0,xs:6,children:e.jsx(g,{variant:"contained",style:{backgroundColor:"#00afb5",width:"100%"},sx:{py:1.5,fontWeight:"bold"},onClick:r=>{r.stopPropagation(),S(o.sellingPrice,o.courseId)},children:"Subscribe"})}),e.jsx(s,{item:!0,xs:6,children:e.jsx(g,{variant:"outlined",sx:{py:1.5,fontWeight:"bold",color:"#00afb5",width:"100%"},onClick:r=>{r.stopPropagation(),v(o.courseId)},children:"View More"})})]})]})})]})})})},o.courseId))})]})};export{U as default};
