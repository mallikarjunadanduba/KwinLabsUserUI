import{u as A,H as R,r,j as e,L as M,N as q,f as n,b as S,c as D,M as F,G as u}from"./index-Dg2GFtxE.js";import{f as W,a as z}from"./McqCategoryApi-Bg826asI.js";import{A as x}from"./Alert-B7YS0Kez.js";import{P as G}from"./Pagination-DShJ7yuw.js";import"./LastPage-DdfZQxWB.js";const X=()=>{A();const I=R(),{categoryId:c,categoryName:v}=I.state||{},[E,p]=r.useState([]),[s,f]=r.useState(null),[i,N]=r.useState({}),[l,m]=r.useState(1),d=5,[g,b]=r.useState(null),[j,y]=r.useState(null),[C,k]=r.useState(null);r.useEffect(()=>{if(!c)return;(async()=>{try{const t=JSON.parse(sessionStorage.getItem("user")),h={"Content-type":"application/json",Authorization:"Bearer "+(t==null?void 0:t.accessToken)},a=await W(h,c);a.data.length>0?(p(a.data),f(a.data[0].moduleId),w(a.data[0].moduleId)):(p([]),b("No modules found for this category."))}catch(t){console.error("Error fetching MCQs:",t),b("Failed to fetch modules.")}})()},[c]);const T=o=>{f(o),m(1),w(o)},w=async o=>{try{const t=JSON.parse(sessionStorage.getItem("user")),h={"Content-type":"application/json",Authorization:"Bearer "+(t==null?void 0:t.accessToken)},a=await z(h,o,0,10);a.data.content.length===0?k("No topics found for this module."):k(null),N(B=>({...B,[o]:a.data.content})),y(null)}catch(t){console.error("Error fetching topics:",t),y("Failed to fetch topics.")}},P=(o,t)=>{m(t)};return e.jsxs(e.Fragment,{children:[e.jsx(M,{sx:{boxShadow:"none",backgroundColor:"white"},children:e.jsx(q,{children:e.jsxs(n,{variant:"h4",sx:{fontWeight:"bold",color:"black",mb:2},children:["MCQ Modules - ",v]})})}),g&&e.jsx(x,{severity:"error",children:g}),e.jsx("br",{}),e.jsx(S,{sx:{display:"flex",overflowX:"auto",gap:2,mb:3,"&::-webkit-scrollbar":{height:"8px"},"&::-webkit-scrollbar-thumb":{backgroundColor:"#00afb5",borderRadius:"4px"},"&::-webkit-scrollbar-track":{backgroundColor:"#f0f0f0"}},children:E.map(o=>e.jsx(D,{onClick:()=>T(o.moduleId),sx:{flex:"0 0 auto",backgroundColor:s===o.moduleId?"#00afb5":"white",color:s===o.moduleId?"white":"black",fontWeight:"bold",borderRadius:"24px",padding:"10px 20px",border:s===o.moduleId?"2px solid white":"2px solid transparent","&:hover":{backgroundColor:"#008b8b",transform:"scale(1.05)"}},children:o.moduleName},o.moduleId))}),e.jsx(F,{sx:{mt:2,backgroundColor:"transparent"},children:j?e.jsx(x,{severity:"error",children:j}):C?e.jsx(x,{severity:"info",children:C}):s&&i[s]?e.jsxs(u,{container:!0,spacing:2,children:[i[s].slice((l-1)*d,l*d).map(o=>e.jsx(u,{item:!0,xs:12,children:e.jsx(M,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},alignItems:"center",p:1.5,boxShadow:2,borderRadius:"12px",background:"#ffffff",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{boxShadow:5,transform:"scale(1.02)"}},children:e.jsxs(S,{sx:{flex:1,pl:{sm:2},textAlign:"left"},children:[e.jsx(n,{variant:"h3",sx:{fontWeight:"bold",color:"#000"},children:o.topicName}),e.jsx(n,{variant:"body2",sx:{color:"#555"},children:o.description})]})})},o.topicId)),e.jsx(u,{item:!0,xs:12,sx:{display:"flex",justifyContent:"center",mt:1.5},children:e.jsx(G,{count:Math.ceil(i[s].length/d),page:l,onChange:P,color:"primary",variant:"outlined",shape:"rounded"})})]}):e.jsx(n,{variant:"body2",sx:{color:"#777",mt:2},children:"No topics found for the selected module."})})]})};export{X as default};
