import{u as z,r as n,j as e,M as O,b as D,c as m,G as i,g as V,P as G,I as C,T as d,F as J,h as _,S as q}from"./index-Dg2GFtxE.js";import{d as K,D as Q}from"./Add-DhjQQOyT.js";import{h as P}from"./moment-G82_0lEo.js";import{b as X,f as Y}from"./AcademyCategoryApi-ASP_xB5v.js";import{T as Z,a as $,b as ee,c as v,d as N,e as re,f as ae}from"./TableRow-tis0D7HP.js";import{E as te}from"./Edit-CUj485z6.js";import{D as se}from"./DeleteForever-CR4V1Om4.js";import{D as ie,a as oe}from"./DialogTitle-CHS1QA2F.js";import{M as ne}from"./MenuItem-DouCongq.js";import"./LastPage-DdfZQxWB.js";const T=[{id:"courseId",label:"ID"},{id:"courseName",label:"Name",minWidth:100},{id:"description",label:"Description",minWidth:100},{id:"discount",label:"Discount"},{id:"handlingFee",label:"Handling Fee"},{id:"sellingPrice",label:"Selling Price"},{id:"subscriptionDays",label:"Subscription Days"},{id:"trailPeriod",label:"Trail Period"},{id:"categoryName",label:"Category Name",minWidth:150},{id:"videoUrl",label:"Video URL"},{id:"createdBy",label:"Created By",align:"right"},{id:"updatedBy",label:"Updated By",align:"right"},{id:"insertedDate",label:"Inserted Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],je=()=>{z();const[h,x]=n.useState(0),[c,I]=n.useState(10),[p,y]=n.useState([]),[S,F]=n.useState([]),[U,g]=n.useState(!1),[W,B]=n.useState(!1),[o,f]=n.useState({courseName:"",description:"",discount:"",handlingFee:"",sellingPrice:"",subscriptionDays:"",trailPeriod:"",videoUrl:"",categoryId:""}),[a,w]=n.useState({}),[k,le]=n.useState(!1),E=(r,s)=>{x(s)},A=r=>{I(+r.target.value),x(0)},b={"Content-type":"application/json",Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("user")).accessToken},R=async()=>{try{const s=(await X(b)).data.content;if(s){const j=s.map(t=>({courseId:t.courseId,courseName:t.courseName,description:t.description,discount:t.discount,handlingFee:t.handlingFee,sellingPrice:t.sellingPrice,subscriptionDays:t.subscriptionDays,trailPeriod:t.trailPeriod,categoryName:t.upskillCategoryDtoList?t.upskillCategoryDtoList.categoryName:"No Category",videoUrl:t.videoUrl,insertedDate:P(t.insertedDate).format("L"),updatedDate:P(t.updatedDate).format("L"),createdBy:t.createdBy?t.createdBy.userName:"No User",updatedBy:t.updatedBy?t.updatedBy.userName:"No User"}));y(j)}else y([])}catch(r){console.error("Error fetching data:",r)}},H=async()=>{try{const s=(await Y(b)).data;if(s){const t=s.sort((u,M)=>u.categoryName.localeCompare(M.categoryName)).map(u=>({categoryId:u.categoryId,categoryName:u.categoryName}));F(t)}}catch(r){console.error("Error fetching categories:",r)}};n.useEffect(()=>{R(),H()},[k]);const l=r=>{f({...o,[r.target.name]:r.target.value}),w({...a,[r.target.name]:null})},L=()=>{B(!1),f({courseName:"",description:"",discount:"",handlingFee:"",sellingPrice:"",subscriptionDays:"",trailPeriod:"",videoUrl:"",categoryId:""}),g(!0)};return e.jsxs(O,{title:e.jsxs(D,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Academy Courses"}),e.jsxs(m,{variant:"contained",color:"primary",sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:L,children:["Add",e.jsx(K,{sx:{color:"#fff"}})]})]}),children:[e.jsx(i,{container:!0,spacing:V}),e.jsxs(G,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(Z,{sx:{maxHeight:440},children:e.jsxs($,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(ee,{children:e.jsx(v,{children:T.map(r=>e.jsx(N,{align:r.align,style:{minWidth:r.minWidth,fontWeight:600,fontSize:15},children:r.label},r.id))})}),e.jsx(re,{children:p.slice(h*c,h*c+c).map(r=>e.jsx(v,{hover:!0,role:"checkbox",tabIndex:-1,children:T.map(s=>e.jsx(N,{align:s.align,children:s.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(C,{color:"primary",children:e.jsx(te,{})}),e.jsx(C,{color:"error",children:e.jsx(se,{})})]}):r[s.id]},s.id))},r.categoryId))})]})}),e.jsx(ae,{rowsPerPageOptions:[10,25,100],component:"div",count:p.length,rowsPerPage:c,page:h,onPageChange:E,onRowsPerPageChange:A})]}),e.jsxs(ie,{open:U,onClose:()=>g(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(oe,{sx:{fontSize:"16px"},children:W?"Edit Courses":"Add Courses"}),e.jsxs(D,{component:"form",noValidate:!0,sx:{p:3},children:[e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"Category Name",name:"courseName",value:o.courseName,onChange:l,error:!!a.courseName,helperText:a.courseName})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"Description",name:"description",value:o.description,onChange:l,error:!!a.description,helperText:a.description,multiline:!0,rows:3})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"Discount",name:"discount",value:o.discount,onChange:l,error:!!a.discount,helperText:a.discount})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"HandlingFee",name:"handlingFee",value:o.handlingFee,onChange:l,error:!!a.handlingFee,helperText:a.handlingFee})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"Selling Price",name:"sellingPrice",value:o.sellingPrice,onChange:l,error:!!a.sellingPrice,helperText:a.sellingPrice})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"Subscription Days",name:"subscriptionDays",value:o.subscriptionDays,onChange:l,error:!!a.subscriptionDays,helperText:a.subscriptionDays})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"Trail Period ",name:"trailPeriod",value:o.trailPeriod,onChange:l,error:!!a.trailPeriod,helperText:a.trailPeriod})}),e.jsx(i,{item:!0,xs:12,children:e.jsxs(J,{fullWidth:!0,sx:{mb:2},children:[e.jsx(_,{children:"Category"}),e.jsx(q,{name:"categoryId",value:o.categoryId,onChange:l,error:!!a.categoryId,helperText:a.categoryId,children:S.map(r=>e.jsx(ne,{value:r.categoryId,children:r.categoryName},r.categoryId))})]})}),e.jsx(i,{item:!0,xs:12,children:e.jsx(d,{fullWidth:!0,label:"VideoUrl ",name:"videoUrl",value:o.videoUrl,onChange:l,error:!!a.videoUrl,helperText:a.videoUrl})})]}),e.jsxs(Q,{children:[e.jsx(m,{onClick:()=>g(!1),children:"Cancel"}),e.jsx(m,{type:"submit",variant:"contained",color:"primary",children:"Save"})]})]})]})]})};export{je as default};
