import{H,J as I,r as i,j as t,b as d,f as s,c as u,P as L,aF as m,L as y,G as r,aD as n,N as $}from"./index-Dg2GFtxE.js";import{l as N}from"./index-BSjJLjFA.js";import{b as Q,c as U}from"./MCATestApi-mKi7mI3Q.js";import{C as F}from"./CircularProgress-CyqkBCJ6.js";const Y=()=>{var g;const w=H(),a=I(),x=(g=w.state)==null?void 0:g.historyId,[h,v]=i.useState(null),[R,C]=i.useState([]),[S,A]=i.useState(!0),j=i.useRef(),p={"Content-type":"application/json",Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("user")).accessToken};i.useEffect(()=>{(async()=>{try{const o=await Q(p,x),c=await U(p,x);v(o),C(c)}catch(o){console.error(o),a("/jobs/tests")}finally{A(!1)}})()},[x,a]);const B=N.useReactToPrint({content:()=>j.current,documentTitle:"Exam_Result_Report"}),W=(e,o)=>e?e===o?"Correct":"Wrong":"Unanswered",E=e=>e==="Correct"?"success":e==="Wrong"?"error":"default";if(S)return t.jsxs(d,{p:5,textAlign:"center",children:[t.jsx(F,{}),t.jsx(s,{mt:2,children:"Loading Exam Result..."})]});if(!h)return t.jsxs(d,{p:4,children:[t.jsx(s,{variant:"h6",color:"error",children:"Missing exam data. Redirecting..."}),t.jsx(u,{variant:"contained",onClick:()=>a("/jobs/tests"),children:"Back to Tests"})]});const{totalQuestions:z,attemptedQuestions:T,correctAnswers:D,wrongAnswers:P,unattempted:k,result:l}=h;return t.jsxs(L,{elevation:3,sx:{maxWidth:1300,width:"100%",p:3,borderRadius:3,bgcolor:"#f5f7fa",minHeight:"100vh",m:"auto",display:"flex",flexDirection:"column",alignItems:"center"},children:[t.jsxs(d,{mb:2,alignSelf:"flex-end",display:"flex",gap:2,className:"no-print",children:[t.jsx(u,{variant:"contained",onClick:()=>a("/jobs/tests"),children:"Back to Test List"}),t.jsx(u,{variant:"outlined",onClick:B,children:"Print Result"})]}),t.jsxs("div",{ref:j,style:{width:"100%"},children:[t.jsx(s,{variant:"h4",gutterBottom:!0,color:"primary",fontWeight:600,textAlign:"center",children:"Exam Result Report"}),t.jsx(m,{sx:{my:3}}),t.jsxs(y,{sx:{mb:4,p:3,borderRadius:3,boxShadow:3},children:[t.jsx(s,{variant:"h5",gutterBottom:!0,sx:{fontWeight:600,mb:2},children:"📝 Overall Result Summary"}),t.jsx(m,{sx:{mb:3}}),t.jsxs(r,{container:!0,spacing:2,children:[t.jsx(r,{item:!0,xs:12,sm:6,md:4,children:t.jsx(n,{label:`Total Questions: ${z}`,variant:"outlined",sx:{width:"100%",py:1.5,fontSize:16,fontWeight:"bold"}})}),t.jsx(r,{item:!0,xs:12,sm:6,md:4,children:t.jsx(n,{color:"info",label:`Attempted: ${T}`,sx:{width:"100%",py:1.5,fontSize:16,fontWeight:"bold"}})}),t.jsx(r,{item:!0,xs:12,sm:6,md:4,children:t.jsx(n,{color:"success",label:`Correct: ${D}`,sx:{width:"100%",py:1.5,fontSize:16,fontWeight:"bold"}})}),t.jsx(r,{item:!0,xs:12,sm:6,md:4,children:t.jsx(n,{color:"error",label:`Wrong: ${P}`,sx:{width:"100%",py:1.5,fontSize:16,fontWeight:"bold"}})}),t.jsx(r,{item:!0,xs:12,sm:6,md:4,children:t.jsx(n,{color:"default",label:`Unattempted: ${k}`,sx:{width:"100%",py:1.5,fontSize:16,fontWeight:"bold"}})}),t.jsx(r,{item:!0,xs:12,sm:6,md:4,children:t.jsx(n,{color:(l==null?void 0:l.trim().toLowerCase())==="pass"?"success":"error",label:`Final Result: ${l}`,sx:{width:"100%",py:1.5,fontSize:16,fontWeight:"bold"}})})]})]}),t.jsx(m,{sx:{mb:4}}),t.jsx(r,{container:!0,spacing:3,children:R.map((e,o)=>{const c=e.selectedAnswer||"",f=e.correctAnswer,b=W(c,f);return t.jsx(r,{item:!0,xs:12,sm:6,md:4,children:t.jsx(y,{variant:"outlined",sx:{borderColor:"#ddd",borderRadius:2,height:"100%"},children:t.jsxs($,{children:[t.jsxs(s,{variant:"subtitle1",fontWeight:600,gutterBottom:!0,children:["Q",o+1,". ",e.questionText]}),t.jsxs(d,{mt:1,children:[t.jsxs(s,{variant:"body2",gutterBottom:!0,children:[t.jsx("strong",{children:"Your Answer:"})," ",c||"Unanswered"]}),t.jsxs(s,{variant:"body2",gutterBottom:!0,children:[t.jsx("strong",{children:"Correct Answer:"})," ",f]}),t.jsxs(s,{variant:"body2",gutterBottom:!0,children:[t.jsx("strong",{children:"Score:"})," ",e.scoreAwarded," ",e.penaltyApplied<0&&t.jsxs(s,{component:"span",color:"error",children:["(Penalty: ",e.penaltyApplied,")"]})]}),t.jsxs(s,{variant:"body2",mt:1,children:[t.jsx("strong",{children:"Status: "}),t.jsx(n,{label:b,color:E(b),size:"small"})]})]})]})})},e.id)})})]})]})};export{Y as default};
