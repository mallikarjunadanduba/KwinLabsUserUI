import{J as R,r as s,j as t,b as a,P as B,f as n,aF as k,F as x,h as f,S as h,c as q,ao as i}from"./index-Dg2GFtxE.js";import{d as N}from"./PlayArrow-DQEbYAAW.js";import{f as A,g as D}from"./MCATestApi-mKi7mI3Q.js";import{M as m}from"./MenuItem-DouCongq.js";const _=()=>{const g=R(),[j,y]=s.useState(!0),[v,I]=s.useState([]),[o,S]=s.useState(""),[l,E]=s.useState(""),[c,C]=s.useState(""),d=s.useRef(Date.now()),T=s.useRef(null),w=20,p="PRACTICE",L=[{value:"beginner",label:"Beginner"},{value:"intermediate",label:"Intermediate"},{value:"advanced",label:"Advanced"},{value:"expert",label:"Expert"}],W=[{value:"0-1",label:"0-1 years"},{value:"1-3",label:"1-3 years"},{value:"3-5",label:"3-5 years"},{value:"5-10",label:"5-10 years"},{value:"10+",label:"10+ years"}],b={"Content-type":"application/json",Authorization:"Bearer "+JSON.parse(sessionStorage.getItem("user")).accessToken};s.useEffect(()=>{const e=new BroadcastChannel("exam_channel");return T.current=e,e.postMessage({type:"check",tabId:d.current}),e.onmessage=u=>{const{type:r,tabId:P}=u.data;r==="check"?e.postMessage({type:"active",tabId:d.current}):r==="active"&&P!==d.current&&y(!1)},()=>{e.close()}},[]),s.useEffect(()=>{A(b).then(e=>{I((e==null?void 0:e.content)||[])}).catch(e=>{console.error("Error fetching topics:",e)})},[]);const M=async()=>{if(!j){alert("Another tab is open. Close it before starting.");return}if(!o){i.fire("Incomplete","Please select a topic","warning");return}if(!l){i.fire("Incomplete","Please select expertise level","warning");return}if(!c){i.fire("Incomplete","Please select experience level","warning");return}const e=v.find(r=>r.topicId===o);if(!e){i.fire("Error","Invalid topic selected","error");return}const u={mode:p,numberOfQuestions:w,mcqTopicDTOList:[{topicId:e.topicId,topicName:e.topicName}],expertiseLevel:l,experienceLevel:c};try{const r=await D(u,b);r&&r.length>0?g("/jobs/exam",{state:{mcqData:r,selectedTopic:e,selectedMode:p,expertiseLevel:l,experienceLevel:c}}):i.fire("No Questions","No MCQs available for selected filters.","info")}catch(r){console.error("MCQ fetch error:",r),i.fire("Error","Something went wrong while fetching questions.","error")}};return t.jsx(a,{sx:{minHeight:"100%",bgcolor:"#f4f6f8",display:"flex",justifyContent:"center",alignItems:"center",px:2},children:t.jsxs(B,{elevation:4,sx:{maxWidth:1e3,width:"100%",p:5,borderRadius:3,textAlign:"left"},children:[t.jsx(n,{variant:"h4",fontWeight:600,color:"primary.main",gutterBottom:!0,children:"Practice Instructions"}),t.jsxs(a,{sx:{mb:2},children:[t.jsx(n,{variant:"body1",children:"• Timed practice; auto-submit after time ends."}),t.jsx(n,{variant:"body1",children:"• Practice mode only; results visible after submit."}),t.jsx(n,{variant:"body1",children:"• Unlimited attempts allowed."})]}),t.jsx(k,{sx:{my:3}}),t.jsx(a,{sx:{mb:3,display:"flex",gap:2,flexWrap:"wrap"},children:t.jsxs(a,{sx:{minWidth:200,backgroundColor:"#e3f2fd",px:2,py:1,borderRadius:1,border:"1px solid #90caf9",display:"flex",alignItems:"center"},children:[t.jsx(n,{variant:"body2",sx:{fontWeight:600,mr:1},children:"Mode:"}),t.jsx(n,{variant:"body2",color:"primary",children:p})]})}),t.jsxs(a,{sx:{mb:4,display:"flex",gap:3,flexWrap:"wrap"},children:[t.jsxs(x,{fullWidth:!0,sx:{minWidth:200,flex:1},children:[t.jsx(f,{children:"Select Topic"}),t.jsx(h,{value:o,onChange:e=>S(e.target.value),label:"Select Topic",children:v.map(e=>t.jsx(m,{value:e.topicId,children:e.topicName},e.topicId))})]}),t.jsxs(x,{fullWidth:!0,sx:{minWidth:200,flex:1},children:[t.jsx(f,{children:"Expertise Level"}),t.jsx(h,{value:l,onChange:e=>E(e.target.value),label:"Expertise Level",children:L.map(e=>t.jsx(m,{value:e.value,children:e.label},e.value))})]}),t.jsxs(x,{fullWidth:!0,sx:{minWidth:200,flex:1},children:[t.jsx(f,{children:"Experience"}),t.jsx(h,{value:c,onChange:e=>C(e.target.value),label:"Experience",children:W.map(e=>t.jsx(m,{value:e.value,children:e.label},e.value))})]})]}),t.jsx(a,{textAlign:"center",children:t.jsx(q,{variant:"contained",size:"large",endIcon:t.jsx(N,{}),onClick:M,sx:{px:5,py:1.5,fontSize:"18px",fontWeight:500,backgroundColor:"rgb(0, 175, 181)","&:hover":{backgroundColor:"rgb(0, 145, 151)"}},children:"Start Practice"})})]})})};export{_ as default};
