import{u as H,r,j as e,M,b as C,c as m,G as c,g as O,P as G,I as D,T as I}from"./index-Dg2GFtxE.js";import{h as B}from"./moment-G82_0lEo.js";import{d as L,D as J}from"./Add-DhjQQOyT.js";import{f as V,a as _}from"./AcademyCategoryApi-ASP_xB5v.js";import{T as q,a as K,b as Q,c as N,d as T,e as X,f as Y}from"./TableRow-tis0D7HP.js";import{E as Z}from"./Edit-CUj485z6.js";import{D as $}from"./DeleteForever-CR4V1Om4.js";import{D as ee,a as te}from"./DialogTitle-CHS1QA2F.js";import"./LastPage-DdfZQxWB.js";import"./MenuItem-DouCongq.js";const P=[{id:"categoryId",label:"ID"},{id:"categoryName",label:"Name",minWidth:100},{id:"description",label:"Description",minWidth:100},{id:"createdBy",label:"Created By",align:"right"},{id:"updatedBy",label:"Updated By",align:"right"},{id:"insertedDate",label:"Inserted Date",align:"right"},{id:"updatedDate",label:"Updated Date",align:"right"},{id:"actions",label:"Actions",align:"right"}],pe=()=>{H();const[l,p]=r.useState(0),[n,S]=r.useState(10),[x,y]=r.useState([]),[v,d]=r.useState(!1),[E,u]=r.useState(!1),[g,h]=r.useState({categoryName:"",description:""}),[i,w]=r.useState({}),[W,ae]=r.useState(!1),[re,k]=r.useState(null),A=(t,a)=>{p(a)},R=t=>{S(+t.target.value),p(0)},f=JSON.parse(sessionStorage.getItem("user")),j={"Content-type":"application/json",Authorization:"Bearer "+f.accessToken},U=async()=>{try{const a=(await V(j)).data.content;if(a){const o=a.map(s=>({categoryId:s.categoryId,categoryName:s.categoryName,description:s.description,insertedDate:B(s.insertedDate).format("L"),updatedDate:B(s.updatedDate).format("L"),createdBy:s.createdBy?s.createdBy.userName:"No User",updatedBy:s.updatedBy?s.updatedBy.userName:"No User"}));y(o)}else y([])}catch(t){console.error("Error fetching data:",t)}};r.useEffect(()=>{U()},[W]);const b=t=>{h({...g,[t.target.name]:t.target.value,createdBy:{userId:f.userId}}),w({...i,[t.target.name]:null})},z=()=>{u(!1),h({categoryName:"",description:""}),d(!0)},F=async t=>{u(!0),d(!0);try{const o=(await _(t,j)).data;k(o.categoryId),h({categoryName:o.categoryName,description:o.description})}catch(a){console.error("Error fetching category details:",a)}};return e.jsxs(M,{title:e.jsxs(C,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Category"}),e.jsxs(m,{variant:"contained",color:"primary",sx:{display:"flex",alignItems:"center",fontSize:"15px"},onClick:z,children:["Add",e.jsx(L,{sx:{color:"#fff"}})]})]}),children:[e.jsx(c,{container:!0,spacing:O}),e.jsxs(G,{sx:{width:"100%",overflow:"hidden"},children:[e.jsx(q,{sx:{maxHeight:440},children:e.jsxs(K,{stickyHeader:!0,"aria-label":"sticky table",children:[e.jsx(Q,{children:e.jsx(N,{children:P.map(t=>e.jsx(T,{align:t.align,style:{minWidth:t.minWidth,fontWeight:600,fontSize:15},children:t.label},t.id))})}),e.jsx(X,{children:x.slice(l*n,l*n+n).map(t=>e.jsx(N,{hover:!0,role:"checkbox",tabIndex:-1,children:P.map(a=>e.jsx(T,{align:a.align,children:a.id==="actions"?e.jsxs(e.Fragment,{children:[e.jsx(D,{onClick:()=>F(t.categoryId),color:"primary",children:e.jsx(Z,{})}),e.jsx(D,{color:"error",children:e.jsx($,{})})]}):t[a.id]},a.id))},t.categoryId))})]})}),e.jsx(Y,{rowsPerPageOptions:[10,25,100],component:"div",count:x.length,rowsPerPage:n,page:l,onPageChange:A,onRowsPerPageChange:R})]}),e.jsxs(ee,{open:v,onClose:()=>d(!1),fullWidth:!0,maxWidth:"md",children:[e.jsx(te,{sx:{fontSize:"16px"},children:E?"Edit Category":"Add Category"}),e.jsxs(C,{component:"form",noValidate:!0,sx:{p:3},children:[e.jsxs(c,{container:!0,spacing:2,children:[e.jsx(c,{item:!0,xs:12,children:e.jsx(I,{fullWidth:!0,label:"Category Name",name:"categoryName",value:g.categoryName,onChange:b,error:!!i.categoryName,helperText:i.categoryName})}),e.jsx(c,{item:!0,xs:12,children:e.jsx(I,{fullWidth:!0,label:"Description",name:"description",value:g.description,onChange:b,error:!!i.description,helperText:i.description,multiline:!0,rows:3})})]}),e.jsxs(J,{children:[e.jsx(m,{onClick:()=>d(!1),children:"Cancel"}),e.jsx(m,{type:"submit",variant:"contained",color:"primary",children:"Save"})]})]})]})]})};export{pe as default};
