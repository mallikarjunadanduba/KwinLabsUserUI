import{R as m,r as i,j as t,M as f,b as p,G as d,a as x,B as u}from"./index-Dg2GFtxE.js";import{j as w}from"./carousel.min-C1RJ6Wsb.js";const y=({filePath:s})=>{const[e,c]=i.useState(""),r=JSON.parse(sessionStorage.getItem("user"));return i.useEffect(()=>s?((async()=>{try{const a=await x.get(`${u}/file/downloadFile/?filePath=${encodeURIComponent(s)}`,{headers:{Authorization:`Bearer ${r==null?void 0:r.accessToken}`},responseType:"blob"}),n=new Blob([a.data],{type:a.headers["content-type"]}),o=URL.createObjectURL(n);c(o)}catch(a){console.error("Error fetching image:",a),c("")}})(),()=>{e&&URL.revokeObjectURL(e)}):void 0,[s,r==null?void 0:r.accessToken]),e?t.jsx("img",{src:e,style:{width:"100%",height:"100%",objectFit:"cover"},alt:"Advertisement"}):"Loading..."},j=async s=>{try{const e=await fetch(`${u}/advertisement/v1/queryAllAdvertisement`,{method:"GET",headers:s});if(console.log(e),!e.ok)throw new Error(`HTTP error! Status: ${e.status}`);return await e.json()}catch(e){return console.error("Error fetching banner data:",e),[]}},v=()=>{const[s,e]=i.useState([]),[c,r]=i.useState(!0),h=JSON.parse(sessionStorage.getItem("user")),a={"Content-Type":"application/json",Authorization:`Bearer ${h==null?void 0:h.accessToken}`};return i.useEffect(()=>{(async()=>{r(!0);try{const o=await j(a);if(o.length>0){const g=o.map(l=>({advertisementId:l.advertisementId,filePath:l.filePath||null}));e(g)}else e([])}catch(o){console.error("Error fetching data:",o)}finally{r(!1)}})()},[]),t.jsx(f,{border:!1,content:!1,sx:{mt:1,width:"100%",height:450},children:t.jsx(p,{sx:{width:"100%",height:"100%"},children:t.jsx(d,{container:!0,direction:"column",sx:{width:"100%",height:"100%"},children:t.jsx(d,{item:!0,xs:12,sx:{width:"100%",height:"100%"},children:c?t.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"Loading..."}):t.jsx(w.Carousel,{showThumbs:!1,showArrows:!0,showIndicators:!0,showStatus:!1,infiniteLoop:!0,autoPlay:!0,interval:3e3,transitionTime:500,stopOnHover:!0,dynamicHeight:!1,swipeable:!0,emulateTouch:!0,style:{width:"100%",height:450},children:s.length>0?s.map(n=>n.filePath?t.jsx("div",{style:{width:"100%",height:450},children:t.jsx(y,{filePath:n.filePath})},n.advertisementId):null):t.jsx("div",{style:{textAlign:"center",padding:"20px"},children:"No Data"})})})})})})};v.propTypes={isLoading:m.bool};export{v as B};
